<div data-ng-init="displayActivity=!commentOnly" ng-class="{well: true, 'well-small': !displayActivity }">
  <div data-ui-if="displayActivity">
    <a href="#!/users/{{comment.creator}}">{{comment.creator}}</a>
    commented on
    <span data-ng-controller="QuestionController">
      <a data-ng-click="fetchQuestionIfNeeded(comment.about);questionShown=!questionShown">a question</a>.
      <div data-ui-if="questionShown"
          data-ng-include="'templates/partials/question.html'">
      </div>
    </span>
  </div>
  <!--
     - <div data-ui-if="user.id != comment.creator.id">
     -     <div data-ng-init="date=comment.modified">
     -         {{ ' ' | dateDiff:date }} by <a data-ng-href="#!/users/{{comment.creator.id}}">{{comment.creator.first_name}} {{comment.creator.last_name}}</a>
     -     </div>
     - </div>
     - <div data-ui-if="user.id == comment.creator.id">
     -     <div data-ng-init="date=comment.modified">
     -         {{ ' ' | dateDiff:date }} by {{comment.creator.first_name}} {{comment.creator.last_name}}
     -     </div>
     - </div>
     -->
  <div data-ng-bind-html-unsafe="comment.content | parseContent"></div>
  <span data-ui-if="!displayActivity">
    by <a href="#!/users/{{comment.creator}}">{{comment.creator}}</a>,
  </span>
  <div class="label">{{ '' | dateDiff:comment.created }}</div>
  <div class="replies" >
    <a data-ng-show="comment.reply_count"
       data-ng-init="repliesShown=false"
       data-ng-click="fetchRepliesIfNeeded(comment);repliesShown=!repliesShown">
      <span data-ng-show="repliesShown">hide</span>
      <span data-ng-show="!repliesShown">show</span>
      <span data-ng-pluralize
            data-count="comment.reply_count"
            data-when="{ 1: 'reply', other: '{{comment.reply_count}} replies' }"></span>
    </a>
  </div>
  <div data-collapse="!repliesShown">
    <div data-ng-repeat="comment in comment.replies"
         data-ng-init="commentOnly=true"
         data-ng-include src="'templates/partials/comment.html'">
    </div>
  </div>
</div>
