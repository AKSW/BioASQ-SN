<script type="text/ng-template" id="answer.html">
    <div class="well">
        <div data-ng-bind-html-unsafe="details[q.id].answer.body | parseContent"></div><br />
        <div data-ng-bind-html-unsafe="details[q.id].answer.annotations | parseContent"></div>
    </div>
</script>

<div data-ng-include src="'partials/templates/navi.html'"></div>
<div class="vspace"></div>
<div class="container">
    <div data-ng-repeat="q in questions">
        <div class="row">
            <div class="span6"> <!--horizontal split 50%/50%  -->
                <div class="row">
                    <!-- question link -->
                    <button class="btn btn-link" style="text-align: left" 
                            data-ng-init="isCollapsed = true" 
                            data-ng-click="questionDetail(q.id); isCollapsed = !isCollapsed">
                            {{q.body}}
                    </button>
                </div>

                <div class="row">
                    <!-- vote up button -->
                    <div class="span1 text-center">
                        <button class="btn btn-mini"
                                data-ng-click="vote(q.id, 'up')">
                                    <i class="icon-arrow-up"></i>
                        </button>
                    </div>
                    <!-- user link -->
                    <div class="span5" data-ng-init="date=q.modified">created by <a data-ng-href="#!/users/{{q.creator_id}}">{{q.creator_first_name}} {{q.creator_last_name}}</a>
                        {{ ' ' | dateDiff:date }}
                    </div>
                </div>
                <div class="row">
                    <div class="span1 text-center">{{q.rank}}</div>
                    <div class="span5"> </div>
                </div>
                <div class="row">
                    <!-- vote down button -->
                    <div class="span1 text-center">
                        <button class="btn btn-mini" 
                                data-ng-click="vote(q.id, 'down')">
                                    <i class="icon-arrow-down"></i>
                        </button>
                    </div>
                    <!-- comments link -->
                    <div class="span2">
                        <a data-ng-click="showComments(q.id )">{{q.comments.length}} comments</a>
                    </div>
                    <!-- follow button -->
                    <div class="span2 btn-group">
                        <button class="btn" data-ng-click="openDialog(q)">Comment</button>
                        <button class="btn" data-ng-click="follow(q.id); q.follows = !q.follows">
                            <div data-ui-if="!q.follows">Follow</div>
                            <div data-ui-if="q.follows">Unfollow</div>
                        </button>
                    </div>
                </div>
                <div class="vspace"></div>
                <!-- show comments -->
                <div ng-repeat="d in comments[q.id]" data-ng-include src="'partials/templates/comment.html'"></div>

            </div>
            <div class="span6"> <!--horizontal split 50%/50%  -->
                <div class="row">
                    <div data-collapse="isCollapsed">
                        <div data-ng-include src="'answer.html'"></div>
                        <!--<button class="btn btn-small pull-right" data-ng-click="isCollapsed = !isCollapsed">Close</button>-->
                    </div>
                </div>
            </div>
        </div>
        <hr>
    </div>
</div>
